function cov_za50xkzfc(){var path="/Users/CRIS/bootcamp/collab/letscoder-bootcamp-202010/staff/cristian-manzano/LiveSessions-project/LiveSessions-api/logic/save-live.js";var hash="e624664273aa6cc6ffb87c6f9243754287ff1ed3";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/CRIS/bootcamp/collab/letscoder-bootcamp-202010/staff/cristian-manzano/LiveSessions-project/LiveSessions-api/logic/save-live.js",statementMap:{"0":{start:{line:10,column:6},end:{line:10,column:38}},"1":{start:{line:12,column:23},end:{line:12,column:41}},"2":{start:{line:14,column:25},end:{line:14,column:45}},"3":{start:{line:16,column:2},end:{line:56,column:4}},"4":{start:{line:28,column:4},end:{line:28,column:66}},"5":{start:{line:28,column:43},end:{line:28,column:66}},"6":{start:{line:29,column:4},end:{line:29,column:52}},"7":{start:{line:29,column:36},end:{line:29,column:52}},"8":{start:{line:30,column:4},end:{line:30,column:24}},"9":{start:{line:31,column:4},end:{line:31,column:24}},"10":{start:{line:32,column:4},end:{line:32,column:30}},"11":{start:{line:33,column:4},end:{line:33,column:26}},"12":{start:{line:34,column:4},end:{line:34,column:30}},"13":{start:{line:35,column:4},end:{line:35,column:28}},"14":{start:{line:36,column:4},end:{line:36,column:36}},"15":{start:{line:40,column:4},end:{line:55,column:7}},"16":{start:{line:41,column:6},end:{line:42,column:66}},"17":{start:{line:42,column:6},end:{line:42,column:66}},"18":{start:{line:44,column:6},end:{line:54,column:36}},"19":{start:{line:54,column:26},end:{line:54,column:34}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:16,column:19},end:{line:16,column:20}},loc:{start:{line:26,column:9},end:{line:56,column:3}},line:26},"1":{name:"(anonymous_1)",decl:{start:{line:40,column:42},end:{line:40,column:43}},loc:{start:{line:40,column:52},end:{line:55,column:5}},line:40},"2":{name:"(anonymous_2)",decl:{start:{line:54,column:16},end:{line:54,column:17}},loc:{start:{line:54,column:26},end:{line:54,column:34}},line:54}},branchMap:{"0":{loc:{start:{line:28,column:4},end:{line:28,column:66}},type:"if",locations:[{start:{line:28,column:4},end:{line:28,column:66}},{start:{line:28,column:4},end:{line:28,column:66}}],line:28},"1":{loc:{start:{line:29,column:4},end:{line:29,column:52}},type:"if",locations:[{start:{line:29,column:4},end:{line:29,column:52}},{start:{line:29,column:4},end:{line:29,column:52}}],line:29},"2":{loc:{start:{line:41,column:6},end:{line:42,column:66}},type:"if",locations:[{start:{line:41,column:6},end:{line:42,column:66}},{start:{line:41,column:6},end:{line:42,column:66}}],line:41}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e624664273aa6cc6ffb87c6f9243754287ff1ed3"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_za50xkzfc=function(){return actualCoverage;};}return actualCoverage;}cov_za50xkzfc();const{validateId,validateDescription,validateTitle,validateLiveDate,validateStatus,validateDuration,validatePayment}=(cov_za50xkzfc().s[0]++,require("./helpers/validations"));const{ObjectId}=(cov_za50xkzfc().s[1]++,require("mongodb"));// const { NotFoundError } = require("../errors");
const{User,Live}=(cov_za50xkzfc().s[2]++,require("../models"));cov_za50xkzfc().s[3]++;module.exports=(promoterId,artistId,_id,title,liveDate,status,duration,payment,description)=>{cov_za50xkzfc().f[0]++;cov_za50xkzfc().s[4]++;// validateId(promoterId);
if(typeof promoterId!=="undefined"){cov_za50xkzfc().b[0][0]++;cov_za50xkzfc().s[5]++;validateId(promoterId);}else{cov_za50xkzfc().b[0][1]++;}cov_za50xkzfc().s[6]++;if(typeof _id!=="undefined"){cov_za50xkzfc().b[1][0]++;cov_za50xkzfc().s[7]++;validateId(_id);}else{cov_za50xkzfc().b[1][1]++;}cov_za50xkzfc().s[8]++;validateId(artistId);cov_za50xkzfc().s[9]++;validateTitle(title);cov_za50xkzfc().s[10]++;validateLiveDate(liveDate);cov_za50xkzfc().s[11]++;validateStatus(status);cov_za50xkzfc().s[12]++;validateDuration(duration);cov_za50xkzfc().s[13]++;validatePayment(payment);cov_za50xkzfc().s[14]++;validateDescription(description);cov_za50xkzfc().s[15]++;return User.findById(promoterId).then(user=>{cov_za50xkzfc().f[1]++;cov_za50xkzfc().s[16]++;if(!user){cov_za50xkzfc().b[2][0]++;cov_za50xkzfc().s[17]++;throw new Error(`promoter with id ${promoterId} not found`);}else{cov_za50xkzfc().b[2][1]++;}cov_za50xkzfc().s[18]++;return Live.create({promoterId:ObjectId(promoterId),artistId:ObjectId(artistId),title,liveDate,status,duration,payment,description,date:new Date()}).then(live=>{cov_za50xkzfc().f[2]++;cov_za50xkzfc().s[19]++;return live._id;});});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNhdmUtbGl2ZS5qcyJdLCJuYW1lcyI6WyJ2YWxpZGF0ZUlkIiwidmFsaWRhdGVEZXNjcmlwdGlvbiIsInZhbGlkYXRlVGl0bGUiLCJ2YWxpZGF0ZUxpdmVEYXRlIiwidmFsaWRhdGVTdGF0dXMiLCJ2YWxpZGF0ZUR1cmF0aW9uIiwidmFsaWRhdGVQYXltZW50IiwicmVxdWlyZSIsIk9iamVjdElkIiwiVXNlciIsIkxpdmUiLCJtb2R1bGUiLCJleHBvcnRzIiwicHJvbW90ZXJJZCIsImFydGlzdElkIiwiX2lkIiwidGl0bGUiLCJsaXZlRGF0ZSIsInN0YXR1cyIsImR1cmF0aW9uIiwicGF5bWVudCIsImRlc2NyaXB0aW9uIiwiZmluZEJ5SWQiLCJ0aGVuIiwidXNlciIsIkVycm9yIiwiY3JlYXRlIiwiZGF0ZSIsIkRhdGUiLCJsaXZlIl0sIm1hcHBpbmdzIjoiMC9GQWVZO3lGQWRaLEtBQU0sQ0FDRkEsVUFERSxDQUVGQyxtQkFGRSxDQUdGQyxhQUhFLENBSUZDLGdCQUpFLENBS0ZDLGNBTEUsQ0FNRkMsZ0JBTkUsQ0FPRkMsZUFQRSwwQkFRQUMsT0FBTyxDQUFDLHVCQUFELENBUlAsQ0FBTixDQVVFLEtBQU0sQ0FBRUMsUUFBRiwwQkFBZUQsT0FBTyxDQUFDLFNBQUQsQ0FBdEIsQ0FBTixDQUNBO0FBQ0EsS0FBTSxDQUFFRSxJQUFGLENBQVFDLElBQVIsMEJBQWlCSCxPQUFPLENBQUMsV0FBRCxDQUF4QixDQUFOLEMsdUJBRUFJLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixDQUNmQyxVQURlLENBRWZDLFFBRmUsQ0FHZkMsR0FIZSxDQUlmQyxLQUplLENBS2ZDLFFBTGUsQ0FNZkMsTUFOZSxDQU9mQyxRQVBlLENBUWZDLE9BUmUsQ0FTZkMsV0FUZSxHQVVWLCtDQUNMO0FBQ0EsR0FBSSxNQUFPUixDQUFBQSxVQUFQLEdBQXNCLFdBQTFCLENBQXVDLGtEQUFBYixVQUFVLENBQUNhLFVBQUQsQ0FBVixDQUF1QixDQUE5RCxnQ0FGSyx1QkFHTCxHQUFJLE1BQU9FLENBQUFBLEdBQVAsR0FBZSxXQUFuQixDQUFnQyxrREFBQWYsVUFBVSxDQUFDZSxHQUFELENBQVYsQ0FBZ0IsQ0FBaEQsZ0NBSEssdUJBSUxmLFVBQVUsQ0FBQ2MsUUFBRCxDQUFWLENBSkssdUJBS0xaLGFBQWEsQ0FBQ2MsS0FBRCxDQUFiLENBTEssd0JBTUxiLGdCQUFnQixDQUFDYyxRQUFELENBQWhCLENBTkssd0JBT0xiLGNBQWMsQ0FBQ2MsTUFBRCxDQUFkLENBUEssd0JBUUxiLGdCQUFnQixDQUFDYyxRQUFELENBQWhCLENBUkssd0JBU0xiLGVBQWUsQ0FBQ2MsT0FBRCxDQUFmLENBVEssd0JBVUxuQixtQkFBbUIsQ0FBQ29CLFdBQUQsQ0FBbkIsQ0FWSyx3QkFjTCxNQUFPWixDQUFBQSxJQUFJLENBQUNhLFFBQUwsQ0FBY1QsVUFBZCxFQUEwQlUsSUFBMUIsQ0FBZ0NDLElBQUQsRUFBVSxnREFDOUMsR0FBSSxDQUFDQSxJQUFMLENBQ0Esd0RBQU0sSUFBSUMsQ0FBQUEsS0FBSixDQUFXLG9CQUFtQlosVUFBVyxZQUF6QyxDQUFOLENBQTRELENBRDVELGdDQUQ4Qyx3QkFJOUMsTUFBT0gsQ0FBQUEsSUFBSSxDQUFDZ0IsTUFBTCxDQUFZLENBQ2ZiLFVBQVUsQ0FBRUwsUUFBUSxDQUFDSyxVQUFELENBREwsQ0FFZkMsUUFBUSxDQUFFTixRQUFRLENBQUNNLFFBQUQsQ0FGSCxDQUdmRSxLQUhlLENBSWZDLFFBSmUsQ0FLZkMsTUFMZSxDQU1mQyxRQU5lLENBT2ZDLE9BUGUsQ0FRZkMsV0FSZSxDQVNmTSxJQUFJLENBQUUsR0FBSUMsQ0FBQUEsSUFBSixFQVRTLENBQVosRUFVRkwsSUFWRSxDQVVJTSxJQUFELEVBQVUsc0RBQUFBLENBQUFBLElBQUksQ0FBQ2QsR0FBTCxDQUFRLENBVnJCLENBQVAsQ0FXRCxDQWZNLENBQVAsQ0FnQkQsQ0F4Q0QiLCJzb3VyY2VzQ29udGVudCI6WyJcbmNvbnN0IHtcbiAgICB2YWxpZGF0ZUlkLFxuICAgIHZhbGlkYXRlRGVzY3JpcHRpb24sXG4gICAgdmFsaWRhdGVUaXRsZSxcbiAgICB2YWxpZGF0ZUxpdmVEYXRlLFxuICAgIHZhbGlkYXRlU3RhdHVzLFxuICAgIHZhbGlkYXRlRHVyYXRpb24sXG4gICAgdmFsaWRhdGVQYXltZW50XG4gIH0gPSByZXF1aXJlKFwiLi9oZWxwZXJzL3ZhbGlkYXRpb25zXCIpO1xuXG4gIGNvbnN0IHsgT2JqZWN0SWQgfSA9IHJlcXVpcmUoXCJtb25nb2RiXCIpO1xuICAvLyBjb25zdCB7IE5vdEZvdW5kRXJyb3IgfSA9IHJlcXVpcmUoXCIuLi9lcnJvcnNcIik7XG4gIGNvbnN0IHsgVXNlciwgTGl2ZSB9ID0gcmVxdWlyZShcIi4uL21vZGVsc1wiKTtcbiAgXG4gIG1vZHVsZS5leHBvcnRzID0gKFxuICAgIHByb21vdGVySWQsXG4gICAgYXJ0aXN0SWQsXG4gICAgX2lkLFxuICAgIHRpdGxlLCBcbiAgICBsaXZlRGF0ZSwgXG4gICAgc3RhdHVzLCBcbiAgICBkdXJhdGlvbiwgXG4gICAgcGF5bWVudCwgXG4gICAgZGVzY3JpcHRpb24sXG4gICAgKSA9PiB7XG4gICAgLy8gdmFsaWRhdGVJZChwcm9tb3RlcklkKTtcbiAgICBpZiAodHlwZW9mIHByb21vdGVySWQgIT09IFwidW5kZWZpbmVkXCIpIHZhbGlkYXRlSWQocHJvbW90ZXJJZCk7XG4gICAgaWYgKHR5cGVvZiBfaWQgIT09IFwidW5kZWZpbmVkXCIpIHZhbGlkYXRlSWQoX2lkKTtcbiAgICB2YWxpZGF0ZUlkKGFydGlzdElkKVxuICAgIHZhbGlkYXRlVGl0bGUodGl0bGUpXG4gICAgdmFsaWRhdGVMaXZlRGF0ZShsaXZlRGF0ZSlcbiAgICB2YWxpZGF0ZVN0YXR1cyhzdGF0dXMpXG4gICAgdmFsaWRhdGVEdXJhdGlvbihkdXJhdGlvbilcbiAgICB2YWxpZGF0ZVBheW1lbnQocGF5bWVudClcbiAgICB2YWxpZGF0ZURlc2NyaXB0aW9uKGRlc2NyaXB0aW9uKVxuXG5cblxuICAgIHJldHVybiBVc2VyLmZpbmRCeUlkKHByb21vdGVySWQpLnRoZW4oKHVzZXIpID0+IHtcbiAgICAgIGlmICghdXNlcikgXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHByb21vdGVyIHdpdGggaWQgJHtwcm9tb3RlcklkfSBub3QgZm91bmRgKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIExpdmUuY3JlYXRlKHtcbiAgICAgICAgICBwcm9tb3RlcklkOiBPYmplY3RJZChwcm9tb3RlcklkKSxcbiAgICAgICAgICBhcnRpc3RJZDogT2JqZWN0SWQoYXJ0aXN0SWQpLFxuICAgICAgICAgIHRpdGxlLCBcbiAgICAgICAgICBsaXZlRGF0ZSwgXG4gICAgICAgICAgc3RhdHVzLCBcbiAgICAgICAgICBkdXJhdGlvbiwgXG4gICAgICAgICAgcGF5bWVudCwgXG4gICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgZGF0ZTogbmV3IERhdGUoKSxcbiAgICAgICAgfSkudGhlbigobGl2ZSkgPT4gbGl2ZS5faWQpO1xuICAgIH0pO1xuICB9OyJdfQ==