function cov_za50xkzfc(){var path="/Users/CRIS/bootcamp/collab/letscoder-bootcamp-202010/staff/cristian-manzano/LiveSessions-project/LiveSessions-api/logic/save-live.js";var hash="b2c5cb76780e65097efa0f19df76cd653d99bfe3";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/CRIS/bootcamp/collab/letscoder-bootcamp-202010/staff/cristian-manzano/LiveSessions-project/LiveSessions-api/logic/save-live.js",statementMap:{"0":{start:{line:10,column:6},end:{line:10,column:38}},"1":{start:{line:12,column:23},end:{line:12,column:41}},"2":{start:{line:14,column:25},end:{line:14,column:45}},"3":{start:{line:16,column:2},end:{line:55,column:4}},"4":{start:{line:27,column:4},end:{line:27,column:66}},"5":{start:{line:27,column:43},end:{line:27,column:66}},"6":{start:{line:28,column:4},end:{line:28,column:52}},"7":{start:{line:28,column:36},end:{line:28,column:52}},"8":{start:{line:29,column:4},end:{line:29,column:24}},"9":{start:{line:30,column:4},end:{line:30,column:24}},"10":{start:{line:31,column:4},end:{line:31,column:30}},"11":{start:{line:32,column:4},end:{line:32,column:26}},"12":{start:{line:33,column:4},end:{line:33,column:30}},"13":{start:{line:34,column:4},end:{line:34,column:28}},"14":{start:{line:35,column:4},end:{line:35,column:36}},"15":{start:{line:39,column:4},end:{line:54,column:7}},"16":{start:{line:40,column:6},end:{line:41,column:66}},"17":{start:{line:41,column:6},end:{line:41,column:66}},"18":{start:{line:43,column:6},end:{line:53,column:36}},"19":{start:{line:53,column:26},end:{line:53,column:34}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:16,column:19},end:{line:16,column:20}},loc:{start:{line:26,column:9},end:{line:55,column:3}},line:26},"1":{name:"(anonymous_1)",decl:{start:{line:39,column:42},end:{line:39,column:43}},loc:{start:{line:39,column:52},end:{line:54,column:5}},line:39},"2":{name:"(anonymous_2)",decl:{start:{line:53,column:16},end:{line:53,column:17}},loc:{start:{line:53,column:26},end:{line:53,column:34}},line:53}},branchMap:{"0":{loc:{start:{line:27,column:4},end:{line:27,column:66}},type:"if",locations:[{start:{line:27,column:4},end:{line:27,column:66}},{start:{line:27,column:4},end:{line:27,column:66}}],line:27},"1":{loc:{start:{line:28,column:4},end:{line:28,column:52}},type:"if",locations:[{start:{line:28,column:4},end:{line:28,column:52}},{start:{line:28,column:4},end:{line:28,column:52}}],line:28},"2":{loc:{start:{line:40,column:6},end:{line:41,column:66}},type:"if",locations:[{start:{line:40,column:6},end:{line:41,column:66}},{start:{line:40,column:6},end:{line:41,column:66}}],line:40}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b2c5cb76780e65097efa0f19df76cd653d99bfe3"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_za50xkzfc=function(){return actualCoverage;};}return actualCoverage;}cov_za50xkzfc();const{validateId,validateDescription,validateTitle,validateLiveDate,validateStatus,validateDuration,validatePayment}=(cov_za50xkzfc().s[0]++,require("./helpers/validations"));const{ObjectId}=(cov_za50xkzfc().s[1]++,require("mongodb"));// const { NotFoundError } = require("../errors");
const{User,Live}=(cov_za50xkzfc().s[2]++,require("../models"));cov_za50xkzfc().s[3]++;module.exports=(promoterId,artistId,_id,title,liveDate,status,duration,payment,description)=>{cov_za50xkzfc().f[0]++;cov_za50xkzfc().s[4]++;if(typeof promoterId!=="undefined"){cov_za50xkzfc().b[0][0]++;cov_za50xkzfc().s[5]++;validateId(promoterId);}else{cov_za50xkzfc().b[0][1]++;}cov_za50xkzfc().s[6]++;if(typeof _id!=="undefined"){cov_za50xkzfc().b[1][0]++;cov_za50xkzfc().s[7]++;validateId(_id);}else{cov_za50xkzfc().b[1][1]++;}cov_za50xkzfc().s[8]++;validateId(artistId);cov_za50xkzfc().s[9]++;validateTitle(title);cov_za50xkzfc().s[10]++;validateLiveDate(liveDate);cov_za50xkzfc().s[11]++;validateStatus(status);cov_za50xkzfc().s[12]++;validateDuration(duration);cov_za50xkzfc().s[13]++;validatePayment(payment);cov_za50xkzfc().s[14]++;validateDescription(description);cov_za50xkzfc().s[15]++;return User.findById(promoterId).then(user=>{cov_za50xkzfc().f[1]++;cov_za50xkzfc().s[16]++;if(!user){cov_za50xkzfc().b[2][0]++;cov_za50xkzfc().s[17]++;throw new Error(`promoter with id ${promoterId} not found`);}else{cov_za50xkzfc().b[2][1]++;}cov_za50xkzfc().s[18]++;return Live.create({promoterId:ObjectId(promoterId),artistId:ObjectId(artistId),title,liveDate,status,duration,payment,description,date:new Date()}).then(live=>{cov_za50xkzfc().f[2]++;cov_za50xkzfc().s[19]++;return live._id;});});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNhdmUtbGl2ZS5qcyJdLCJuYW1lcyI6WyJ2YWxpZGF0ZUlkIiwidmFsaWRhdGVEZXNjcmlwdGlvbiIsInZhbGlkYXRlVGl0bGUiLCJ2YWxpZGF0ZUxpdmVEYXRlIiwidmFsaWRhdGVTdGF0dXMiLCJ2YWxpZGF0ZUR1cmF0aW9uIiwidmFsaWRhdGVQYXltZW50IiwicmVxdWlyZSIsIk9iamVjdElkIiwiVXNlciIsIkxpdmUiLCJtb2R1bGUiLCJleHBvcnRzIiwicHJvbW90ZXJJZCIsImFydGlzdElkIiwiX2lkIiwidGl0bGUiLCJsaXZlRGF0ZSIsInN0YXR1cyIsImR1cmF0aW9uIiwicGF5bWVudCIsImRlc2NyaXB0aW9uIiwiZmluZEJ5SWQiLCJ0aGVuIiwidXNlciIsIkVycm9yIiwiY3JlYXRlIiwiZGF0ZSIsIkRhdGUiLCJsaXZlIl0sIm1hcHBpbmdzIjoiMC9GQWVZO3lGQWRaLEtBQU0sQ0FDRkEsVUFERSxDQUVGQyxtQkFGRSxDQUdGQyxhQUhFLENBSUZDLGdCQUpFLENBS0ZDLGNBTEUsQ0FNRkMsZ0JBTkUsQ0FPRkMsZUFQRSwwQkFRQUMsT0FBTyxDQUFDLHVCQUFELENBUlAsQ0FBTixDQVVFLEtBQU0sQ0FBRUMsUUFBRiwwQkFBZUQsT0FBTyxDQUFDLFNBQUQsQ0FBdEIsQ0FBTixDQUNBO0FBQ0EsS0FBTSxDQUFFRSxJQUFGLENBQVFDLElBQVIsMEJBQWlCSCxPQUFPLENBQUMsV0FBRCxDQUF4QixDQUFOLEMsdUJBRUFJLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixDQUNmQyxVQURlLENBRWZDLFFBRmUsQ0FHZkMsR0FIZSxDQUlmQyxLQUplLENBS2ZDLFFBTGUsQ0FNZkMsTUFOZSxDQU9mQyxRQVBlLENBUWZDLE9BUmUsQ0FTZkMsV0FUZSxHQVVWLCtDQUNMLEdBQUksTUFBT1IsQ0FBQUEsVUFBUCxHQUFzQixXQUExQixDQUF1QyxrREFBQWIsVUFBVSxDQUFDYSxVQUFELENBQVYsQ0FBdUIsQ0FBOUQsZ0NBREssdUJBRUwsR0FBSSxNQUFPRSxDQUFBQSxHQUFQLEdBQWUsV0FBbkIsQ0FBZ0Msa0RBQUFmLFVBQVUsQ0FBQ2UsR0FBRCxDQUFWLENBQWdCLENBQWhELGdDQUZLLHVCQUdMZixVQUFVLENBQUNjLFFBQUQsQ0FBVixDQUhLLHVCQUlMWixhQUFhLENBQUNjLEtBQUQsQ0FBYixDQUpLLHdCQUtMYixnQkFBZ0IsQ0FBQ2MsUUFBRCxDQUFoQixDQUxLLHdCQU1MYixjQUFjLENBQUNjLE1BQUQsQ0FBZCxDQU5LLHdCQU9MYixnQkFBZ0IsQ0FBQ2MsUUFBRCxDQUFoQixDQVBLLHdCQVFMYixlQUFlLENBQUNjLE9BQUQsQ0FBZixDQVJLLHdCQVNMbkIsbUJBQW1CLENBQUNvQixXQUFELENBQW5CLENBVEssd0JBYUwsTUFBT1osQ0FBQUEsSUFBSSxDQUFDYSxRQUFMLENBQWNULFVBQWQsRUFBMEJVLElBQTFCLENBQWdDQyxJQUFELEVBQVUsZ0RBQzlDLEdBQUksQ0FBQ0EsSUFBTCxDQUNBLHdEQUFNLElBQUlDLENBQUFBLEtBQUosQ0FBVyxvQkFBbUJaLFVBQVcsWUFBekMsQ0FBTixDQUE0RCxDQUQ1RCxnQ0FEOEMsd0JBSTlDLE1BQU9ILENBQUFBLElBQUksQ0FBQ2dCLE1BQUwsQ0FBWSxDQUNmYixVQUFVLENBQUVMLFFBQVEsQ0FBQ0ssVUFBRCxDQURMLENBRWZDLFFBQVEsQ0FBRU4sUUFBUSxDQUFDTSxRQUFELENBRkgsQ0FHZkUsS0FIZSxDQUlmQyxRQUplLENBS2ZDLE1BTGUsQ0FNZkMsUUFOZSxDQU9mQyxPQVBlLENBUWZDLFdBUmUsQ0FTZk0sSUFBSSxDQUFFLEdBQUlDLENBQUFBLElBQUosRUFUUyxDQUFaLEVBVUZMLElBVkUsQ0FVSU0sSUFBRCxFQUFVLHNEQUFBQSxDQUFBQSxJQUFJLENBQUNkLEdBQUwsQ0FBUSxDQVZyQixDQUFQLENBV0QsQ0FmTSxDQUFQLENBZ0JELENBdkNEIiwic291cmNlc0NvbnRlbnQiOlsiXG5jb25zdCB7XG4gICAgdmFsaWRhdGVJZCxcbiAgICB2YWxpZGF0ZURlc2NyaXB0aW9uLFxuICAgIHZhbGlkYXRlVGl0bGUsXG4gICAgdmFsaWRhdGVMaXZlRGF0ZSxcbiAgICB2YWxpZGF0ZVN0YXR1cyxcbiAgICB2YWxpZGF0ZUR1cmF0aW9uLFxuICAgIHZhbGlkYXRlUGF5bWVudFxuICB9ID0gcmVxdWlyZShcIi4vaGVscGVycy92YWxpZGF0aW9uc1wiKTtcblxuICBjb25zdCB7IE9iamVjdElkIH0gPSByZXF1aXJlKFwibW9uZ29kYlwiKTtcbiAgLy8gY29uc3QgeyBOb3RGb3VuZEVycm9yIH0gPSByZXF1aXJlKFwiLi4vZXJyb3JzXCIpO1xuICBjb25zdCB7IFVzZXIsIExpdmUgfSA9IHJlcXVpcmUoXCIuLi9tb2RlbHNcIik7XG4gIFxuICBtb2R1bGUuZXhwb3J0cyA9IChcbiAgICBwcm9tb3RlcklkLFxuICAgIGFydGlzdElkLFxuICAgIF9pZCxcbiAgICB0aXRsZSwgXG4gICAgbGl2ZURhdGUsIFxuICAgIHN0YXR1cywgXG4gICAgZHVyYXRpb24sIFxuICAgIHBheW1lbnQsIFxuICAgIGRlc2NyaXB0aW9uLFxuICAgICkgPT4ge1xuICAgIGlmICh0eXBlb2YgcHJvbW90ZXJJZCAhPT0gXCJ1bmRlZmluZWRcIikgdmFsaWRhdGVJZChwcm9tb3RlcklkKTtcbiAgICBpZiAodHlwZW9mIF9pZCAhPT0gXCJ1bmRlZmluZWRcIikgdmFsaWRhdGVJZChfaWQpO1xuICAgIHZhbGlkYXRlSWQoYXJ0aXN0SWQpXG4gICAgdmFsaWRhdGVUaXRsZSh0aXRsZSlcbiAgICB2YWxpZGF0ZUxpdmVEYXRlKGxpdmVEYXRlKVxuICAgIHZhbGlkYXRlU3RhdHVzKHN0YXR1cylcbiAgICB2YWxpZGF0ZUR1cmF0aW9uKGR1cmF0aW9uKVxuICAgIHZhbGlkYXRlUGF5bWVudChwYXltZW50KVxuICAgIHZhbGlkYXRlRGVzY3JpcHRpb24oZGVzY3JpcHRpb24pXG5cblxuXG4gICAgcmV0dXJuIFVzZXIuZmluZEJ5SWQocHJvbW90ZXJJZCkudGhlbigodXNlcikgPT4ge1xuICAgICAgaWYgKCF1c2VyKSBcbiAgICAgIHRocm93IG5ldyBFcnJvcihgcHJvbW90ZXIgd2l0aCBpZCAke3Byb21vdGVySWR9IG5vdCBmb3VuZGApO1xuICAgICAgXG4gICAgICByZXR1cm4gTGl2ZS5jcmVhdGUoe1xuICAgICAgICAgIHByb21vdGVySWQ6IE9iamVjdElkKHByb21vdGVySWQpLFxuICAgICAgICAgIGFydGlzdElkOiBPYmplY3RJZChhcnRpc3RJZCksXG4gICAgICAgICAgdGl0bGUsIFxuICAgICAgICAgIGxpdmVEYXRlLCBcbiAgICAgICAgICBzdGF0dXMsIFxuICAgICAgICAgIGR1cmF0aW9uLCBcbiAgICAgICAgICBwYXltZW50LCBcbiAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICBkYXRlOiBuZXcgRGF0ZSgpLFxuICAgICAgICB9KS50aGVuKChsaXZlKSA9PiBsaXZlLl9pZCk7XG4gICAgfSk7XG4gIH07Il19