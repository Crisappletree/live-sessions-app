function cov_za50xkzfc(){var path="/Users/CRIS/bootcamp/collab/letscoder-bootcamp-202010/staff/cristian-manzano/LiveSessions-project/LiveSessions-api/logic/save-live.js";var hash="0965883aecd063c1bfe48e9a0f3456cbf2e19067";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/CRIS/bootcamp/collab/letscoder-bootcamp-202010/staff/cristian-manzano/LiveSessions-project/LiveSessions-api/logic/save-live.js",statementMap:{"0":{start:{line:10,column:6},end:{line:10,column:38}},"1":{start:{line:12,column:23},end:{line:12,column:41}},"2":{start:{line:14,column:25},end:{line:14,column:45}},"3":{start:{line:16,column:2},end:{line:74,column:4}},"4":{start:{line:28,column:4},end:{line:28,column:66}},"5":{start:{line:28,column:43},end:{line:28,column:66}},"6":{start:{line:29,column:4},end:{line:29,column:52}},"7":{start:{line:29,column:36},end:{line:29,column:52}},"8":{start:{line:30,column:4},end:{line:30,column:24}},"9":{start:{line:31,column:4},end:{line:31,column:24}},"10":{start:{line:32,column:4},end:{line:32,column:30}},"11":{start:{line:33,column:4},end:{line:33,column:26}},"12":{start:{line:34,column:4},end:{line:34,column:30}},"13":{start:{line:35,column:4},end:{line:35,column:28}},"14":{start:{line:36,column:4},end:{line:36,column:36}},"15":{start:{line:40,column:4},end:{line:73,column:7}},"16":{start:{line:41,column:6},end:{line:41,column:77}},"17":{start:{line:41,column:17},end:{line:41,column:77}},"18":{start:{line:42,column:6},end:{line:42,column:15}},"19":{start:{line:43,column:6},end:{line:72,column:36}},"20":{start:{line:44,column:8},end:{line:44,column:17}},"21":{start:{line:45,column:8},end:{line:60,column:36}},"22":{start:{line:47,column:12},end:{line:48,column:63}},"23":{start:{line:48,column:14},end:{line:48,column:63}},"24":{start:{line:50,column:12},end:{line:50,column:30}},"25":{start:{line:51,column:12},end:{line:51,column:42}},"26":{start:{line:52,column:12},end:{line:52,column:36}},"27":{start:{line:53,column:12},end:{line:53,column:32}},"28":{start:{line:54,column:12},end:{line:54,column:36}},"29":{start:{line:55,column:12},end:{line:55,column:34}},"30":{start:{line:56,column:12},end:{line:56,column:42}},"31":{start:{line:57,column:12},end:{line:57,column:21}},"32":{start:{line:58,column:12},end:{line:58,column:44}},"33":{start:{line:60,column:26},end:{line:60,column:34}},"34":{start:{line:62,column:6},end:{line:72,column:36}},"35":{start:{line:72,column:26},end:{line:72,column:34}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:16,column:19},end:{line:16,column:20}},loc:{start:{line:26,column:9},end:{line:74,column:3}},line:26},"1":{name:"(anonymous_1)",decl:{start:{line:40,column:42},end:{line:40,column:43}},loc:{start:{line:40,column:52},end:{line:73,column:5}},line:40},"2":{name:"(anonymous_2)",decl:{start:{line:46,column:16},end:{line:46,column:17}},loc:{start:{line:46,column:26},end:{line:59,column:11}},line:46},"3":{name:"(anonymous_3)",decl:{start:{line:60,column:16},end:{line:60,column:17}},loc:{start:{line:60,column:26},end:{line:60,column:34}},line:60},"4":{name:"(anonymous_4)",decl:{start:{line:72,column:16},end:{line:72,column:17}},loc:{start:{line:72,column:26},end:{line:72,column:34}},line:72}},branchMap:{"0":{loc:{start:{line:28,column:4},end:{line:28,column:66}},type:"if",locations:[{start:{line:28,column:4},end:{line:28,column:66}},{start:{line:28,column:4},end:{line:28,column:66}}],line:28},"1":{loc:{start:{line:29,column:4},end:{line:29,column:52}},type:"if",locations:[{start:{line:29,column:4},end:{line:29,column:52}},{start:{line:29,column:4},end:{line:29,column:52}}],line:29},"2":{loc:{start:{line:41,column:6},end:{line:41,column:77}},type:"if",locations:[{start:{line:41,column:6},end:{line:41,column:77}},{start:{line:41,column:6},end:{line:41,column:77}}],line:41},"3":{loc:{start:{line:43,column:6},end:{line:72,column:36}},type:"if",locations:[{start:{line:43,column:6},end:{line:72,column:36}},{start:{line:43,column:6},end:{line:72,column:36}}],line:43},"4":{loc:{start:{line:47,column:12},end:{line:48,column:63}},type:"if",locations:[{start:{line:47,column:12},end:{line:48,column:63}},{start:{line:47,column:12},end:{line:48,column:63}}],line:47}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0965883aecd063c1bfe48e9a0f3456cbf2e19067"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_za50xkzfc=function(){return actualCoverage;};}return actualCoverage;}cov_za50xkzfc();const{validateId,validateDescription,validateTitle,validateLiveDate,validateStatus,validateDuration,validatePayment}=(cov_za50xkzfc().s[0]++,require("./helpers/validations"));const{ObjectId}=(cov_za50xkzfc().s[1]++,require("mongodb"));// const { NotFoundError } = require("../errors");
const{User,Live}=(cov_za50xkzfc().s[2]++,require("../models"));cov_za50xkzfc().s[3]++;module.exports=(promoterId,artistId,_id,title,liveDate,status,duration,payment,description)=>{cov_za50xkzfc().f[0]++;cov_za50xkzfc().s[4]++;// validateId(promoterId);
if(typeof promoterId!=="undefined"){cov_za50xkzfc().b[0][0]++;cov_za50xkzfc().s[5]++;validateId(promoterId);}else{cov_za50xkzfc().b[0][1]++;}cov_za50xkzfc().s[6]++;if(typeof _id!=="undefined"){cov_za50xkzfc().b[1][0]++;cov_za50xkzfc().s[7]++;validateId(_id);}else{cov_za50xkzfc().b[1][1]++;}cov_za50xkzfc().s[8]++;validateId(artistId);cov_za50xkzfc().s[9]++;validateTitle(title);cov_za50xkzfc().s[10]++;validateLiveDate(liveDate);cov_za50xkzfc().s[11]++;validateStatus(status);cov_za50xkzfc().s[12]++;validateDuration(duration);cov_za50xkzfc().s[13]++;validatePayment(payment);cov_za50xkzfc().s[14]++;validateDescription(description);cov_za50xkzfc().s[15]++;return User.findById(promoterId).then(user=>{cov_za50xkzfc().f[1]++;cov_za50xkzfc().s[16]++;if(!user){cov_za50xkzfc().b[2][0]++;cov_za50xkzfc().s[17]++;throw new Error(`promoter with id ${promoterId} not found`);}else{cov_za50xkzfc().b[2][1]++;}cov_za50xkzfc().s[18]++;debugger;cov_za50xkzfc().s[19]++;if(_id){cov_za50xkzfc().b[3][0]++;cov_za50xkzfc().s[20]++;debugger;cov_za50xkzfc().s[21]++;return Live.findById({_id}).then(live=>{cov_za50xkzfc().f[2]++;cov_za50xkzfc().s[22]++;if(!live){cov_za50xkzfc().b[4][0]++;cov_za50xkzfc().s[23]++;throw new Error(`live with id ${_id} not found`);}else{cov_za50xkzfc().b[4][1]++;}cov_za50xkzfc().s[24]++;_id.title=title;cov_za50xkzfc().s[25]++;_id.description=description;cov_za50xkzfc().s[26]++;_id.liveDate=liveDate;cov_za50xkzfc().s[27]++;_id.status=status;cov_za50xkzfc().s[28]++;_id.duration=duration;cov_za50xkzfc().s[29]++;_id.payment=payment;cov_za50xkzfc().s[30]++;_id.description=description;cov_za50xkzfc().s[31]++;debugger;cov_za50xkzfc().s[32]++;return live.updateOne({status});}).then(live=>{cov_za50xkzfc().f[3]++;cov_za50xkzfc().s[33]++;return live._id;});}else{cov_za50xkzfc().b[3][1]++;cov_za50xkzfc().s[34]++;return Live.create({promoterId:ObjectId(promoterId),artistId:ObjectId(artistId),title,liveDate,status,duration,payment,description,date:new Date()}).then(live=>{cov_za50xkzfc().f[4]++;cov_za50xkzfc().s[35]++;return live._id;});}});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNhdmUtbGl2ZS5qcyJdLCJuYW1lcyI6WyJ2YWxpZGF0ZUlkIiwidmFsaWRhdGVEZXNjcmlwdGlvbiIsInZhbGlkYXRlVGl0bGUiLCJ2YWxpZGF0ZUxpdmVEYXRlIiwidmFsaWRhdGVTdGF0dXMiLCJ2YWxpZGF0ZUR1cmF0aW9uIiwidmFsaWRhdGVQYXltZW50IiwicmVxdWlyZSIsIk9iamVjdElkIiwiVXNlciIsIkxpdmUiLCJtb2R1bGUiLCJleHBvcnRzIiwicHJvbW90ZXJJZCIsImFydGlzdElkIiwiX2lkIiwidGl0bGUiLCJsaXZlRGF0ZSIsInN0YXR1cyIsImR1cmF0aW9uIiwicGF5bWVudCIsImRlc2NyaXB0aW9uIiwiZmluZEJ5SWQiLCJ0aGVuIiwidXNlciIsIkVycm9yIiwibGl2ZSIsInVwZGF0ZU9uZSIsImNyZWF0ZSIsImRhdGUiLCJEYXRlIl0sIm1hcHBpbmdzIjoib3NKQWVZO3lGQWRaLEtBQU0sQ0FDRkEsVUFERSxDQUVGQyxtQkFGRSxDQUdGQyxhQUhFLENBSUZDLGdCQUpFLENBS0ZDLGNBTEUsQ0FNRkMsZ0JBTkUsQ0FPRkMsZUFQRSwwQkFRQUMsT0FBTyxDQUFDLHVCQUFELENBUlAsQ0FBTixDQVVFLEtBQU0sQ0FBRUMsUUFBRiwwQkFBZUQsT0FBTyxDQUFDLFNBQUQsQ0FBdEIsQ0FBTixDQUNBO0FBQ0EsS0FBTSxDQUFFRSxJQUFGLENBQVFDLElBQVIsMEJBQWlCSCxPQUFPLENBQUMsV0FBRCxDQUF4QixDQUFOLEMsdUJBRUFJLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixDQUNmQyxVQURlLENBRWZDLFFBRmUsQ0FHZkMsR0FIZSxDQUlmQyxLQUplLENBS2ZDLFFBTGUsQ0FNZkMsTUFOZSxDQU9mQyxRQVBlLENBUWZDLE9BUmUsQ0FTZkMsV0FUZSxHQVVWLCtDQUNMO0FBQ0EsR0FBSSxNQUFPUixDQUFBQSxVQUFQLEdBQXNCLFdBQTFCLENBQXVDLGtEQUFBYixVQUFVLENBQUNhLFVBQUQsQ0FBVixDQUF1QixDQUE5RCxnQ0FGSyx1QkFHTCxHQUFJLE1BQU9FLENBQUFBLEdBQVAsR0FBZSxXQUFuQixDQUFnQyxrREFBQWYsVUFBVSxDQUFDZSxHQUFELENBQVYsQ0FBZ0IsQ0FBaEQsZ0NBSEssdUJBSUxmLFVBQVUsQ0FBQ2MsUUFBRCxDQUFWLENBSkssdUJBS0xaLGFBQWEsQ0FBQ2MsS0FBRCxDQUFiLENBTEssd0JBTUxiLGdCQUFnQixDQUFDYyxRQUFELENBQWhCLENBTkssd0JBT0xiLGNBQWMsQ0FBQ2MsTUFBRCxDQUFkLENBUEssd0JBUUxiLGdCQUFnQixDQUFDYyxRQUFELENBQWhCLENBUkssd0JBU0xiLGVBQWUsQ0FBQ2MsT0FBRCxDQUFmLENBVEssd0JBVUxuQixtQkFBbUIsQ0FBQ29CLFdBQUQsQ0FBbkIsQ0FWSyx3QkFjTCxNQUFPWixDQUFBQSxJQUFJLENBQUNhLFFBQUwsQ0FBY1QsVUFBZCxFQUEwQlUsSUFBMUIsQ0FBZ0NDLElBQUQsRUFBVSxnREFDOUMsR0FBSSxDQUFDQSxJQUFMLENBQVcsd0RBQU0sSUFBSUMsQ0FBQUEsS0FBSixDQUFXLG9CQUFtQlosVUFBVyxZQUF6QyxDQUFOLENBQTRELENBQXZFLGdDQUQ4Qyx3QkFFOUMsU0FGOEMsd0JBRzlDLEdBQUlFLEdBQUosQ0FBUyxtREFDUCxTQURPLHdCQUVQLE1BQU9MLENBQUFBLElBQUksQ0FBQ1ksUUFBTCxDQUFjLENBQUNQLEdBQUQsQ0FBZCxFQUNKUSxJQURJLENBQ0VHLElBQUQsRUFBVSxnREFDZCxHQUFJLENBQUNBLElBQUwsQ0FDRSx3REFBTSxJQUFJRCxDQUFBQSxLQUFKLENBQVcsZ0JBQWVWLEdBQUksWUFBOUIsQ0FBTixDQUFpRCxDQURuRCxnQ0FEYyx3QkFJZEEsR0FBRyxDQUFDQyxLQUFKLENBQVlBLEtBQVosQ0FKYyx3QkFLZEQsR0FBRyxDQUFDTSxXQUFKLENBQWtCQSxXQUFsQixDQUxjLHdCQU1kTixHQUFHLENBQUNFLFFBQUosQ0FBZUEsUUFBZixDQU5jLHdCQU9kRixHQUFHLENBQUNHLE1BQUosQ0FBYUEsTUFBYixDQVBjLHdCQVFkSCxHQUFHLENBQUNJLFFBQUosQ0FBZUEsUUFBZixDQVJjLHdCQVNkSixHQUFHLENBQUNLLE9BQUosQ0FBY0EsT0FBZCxDQVRjLHdCQVVkTCxHQUFHLENBQUNNLFdBQUosQ0FBa0JBLFdBQWxCLENBVmMsd0JBV2QsU0FYYyx3QkFZZCxNQUFPSyxDQUFBQSxJQUFJLENBQUNDLFNBQUwsQ0FBZSxDQUFDVCxNQUFELENBQWYsQ0FBUCxDQUNELENBZEksRUFlSkssSUFmSSxDQWVFRyxJQUFELEVBQVUsc0RBQUFBLENBQUFBLElBQUksQ0FBQ1gsR0FBTCxDQUFRLENBZm5CLENBQVAsQ0FnQkQsQ0FsQkQsSUFtQkEseURBQU9MLENBQUFBLElBQUksQ0FBQ2tCLE1BQUwsQ0FBWSxDQUNmZixVQUFVLENBQUVMLFFBQVEsQ0FBQ0ssVUFBRCxDQURMLENBRWZDLFFBQVEsQ0FBRU4sUUFBUSxDQUFDTSxRQUFELENBRkgsQ0FHZkUsS0FIZSxDQUlmQyxRQUplLENBS2ZDLE1BTGUsQ0FNZkMsUUFOZSxDQU9mQyxPQVBlLENBUWZDLFdBUmUsQ0FTZlEsSUFBSSxDQUFFLEdBQUlDLENBQUFBLElBQUosRUFUUyxDQUFaLEVBVUZQLElBVkUsQ0FVSUcsSUFBRCxFQUFVLHNEQUFBQSxDQUFBQSxJQUFJLENBQUNYLEdBQUwsQ0FBUSxDQVZyQixDQUFQLENBVThCLENBQy9CLENBakNNLENBQVAsQ0FrQ0QsQ0ExREQiLCJzb3VyY2VzQ29udGVudCI6WyJcbmNvbnN0IHtcbiAgICB2YWxpZGF0ZUlkLFxuICAgIHZhbGlkYXRlRGVzY3JpcHRpb24sXG4gICAgdmFsaWRhdGVUaXRsZSxcbiAgICB2YWxpZGF0ZUxpdmVEYXRlLFxuICAgIHZhbGlkYXRlU3RhdHVzLFxuICAgIHZhbGlkYXRlRHVyYXRpb24sXG4gICAgdmFsaWRhdGVQYXltZW50XG4gIH0gPSByZXF1aXJlKFwiLi9oZWxwZXJzL3ZhbGlkYXRpb25zXCIpO1xuXG4gIGNvbnN0IHsgT2JqZWN0SWQgfSA9IHJlcXVpcmUoXCJtb25nb2RiXCIpO1xuICAvLyBjb25zdCB7IE5vdEZvdW5kRXJyb3IgfSA9IHJlcXVpcmUoXCIuLi9lcnJvcnNcIik7XG4gIGNvbnN0IHsgVXNlciwgTGl2ZSB9ID0gcmVxdWlyZShcIi4uL21vZGVsc1wiKTtcbiAgXG4gIG1vZHVsZS5leHBvcnRzID0gKFxuICAgIHByb21vdGVySWQsXG4gICAgYXJ0aXN0SWQsXG4gICAgX2lkLFxuICAgIHRpdGxlLCBcbiAgICBsaXZlRGF0ZSwgXG4gICAgc3RhdHVzLCBcbiAgICBkdXJhdGlvbiwgXG4gICAgcGF5bWVudCwgXG4gICAgZGVzY3JpcHRpb24sXG4gICAgKSA9PiB7XG4gICAgLy8gdmFsaWRhdGVJZChwcm9tb3RlcklkKTtcbiAgICBpZiAodHlwZW9mIHByb21vdGVySWQgIT09IFwidW5kZWZpbmVkXCIpIHZhbGlkYXRlSWQocHJvbW90ZXJJZCk7XG4gICAgaWYgKHR5cGVvZiBfaWQgIT09IFwidW5kZWZpbmVkXCIpIHZhbGlkYXRlSWQoX2lkKTtcbiAgICB2YWxpZGF0ZUlkKGFydGlzdElkKVxuICAgIHZhbGlkYXRlVGl0bGUodGl0bGUpXG4gICAgdmFsaWRhdGVMaXZlRGF0ZShsaXZlRGF0ZSlcbiAgICB2YWxpZGF0ZVN0YXR1cyhzdGF0dXMpXG4gICAgdmFsaWRhdGVEdXJhdGlvbihkdXJhdGlvbilcbiAgICB2YWxpZGF0ZVBheW1lbnQocGF5bWVudClcbiAgICB2YWxpZGF0ZURlc2NyaXB0aW9uKGRlc2NyaXB0aW9uKVxuXG5cblxuICAgIHJldHVybiBVc2VyLmZpbmRCeUlkKHByb21vdGVySWQpLnRoZW4oKHVzZXIpID0+IHtcbiAgICAgIGlmICghdXNlcikgdGhyb3cgbmV3IEVycm9yKGBwcm9tb3RlciB3aXRoIGlkICR7cHJvbW90ZXJJZH0gbm90IGZvdW5kYCk7XG4gICAgICBkZWJ1Z2dlcjtcbiAgICAgIGlmIChfaWQpIHtcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIHJldHVybiBMaXZlLmZpbmRCeUlkKHtfaWR9KVxuICAgICAgICAgIC50aGVuKChsaXZlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWxpdmUpXG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgbGl2ZSB3aXRoIGlkICR7X2lkfSBub3QgZm91bmRgKTtcbiAgXG4gICAgICAgICAgICBfaWQudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgICAgIF9pZC5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgX2lkLmxpdmVEYXRlID0gbGl2ZURhdGU7XG4gICAgICAgICAgICBfaWQuc3RhdHVzID0gc3RhdHVzO1xuICAgICAgICAgICAgX2lkLmR1cmF0aW9uID0gZHVyYXRpb247XG4gICAgICAgICAgICBfaWQucGF5bWVudCA9IHBheW1lbnQ7XG4gICAgICAgICAgICBfaWQuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgcmV0dXJuIGxpdmUudXBkYXRlT25lKHtzdGF0dXN9KTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKChsaXZlKSA9PiBsaXZlLl9pZCk7XG4gICAgICB9IGVsc2VcbiAgICAgIHJldHVybiBMaXZlLmNyZWF0ZSh7XG4gICAgICAgICAgcHJvbW90ZXJJZDogT2JqZWN0SWQocHJvbW90ZXJJZCksXG4gICAgICAgICAgYXJ0aXN0SWQ6IE9iamVjdElkKGFydGlzdElkKSxcbiAgICAgICAgICB0aXRsZSwgXG4gICAgICAgICAgbGl2ZURhdGUsIFxuICAgICAgICAgIHN0YXR1cywgXG4gICAgICAgICAgZHVyYXRpb24sIFxuICAgICAgICAgIHBheW1lbnQsIFxuICAgICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICAgIGRhdGU6IG5ldyBEYXRlKCksXG4gICAgICAgIH0pLnRoZW4oKGxpdmUpID0+IGxpdmUuX2lkKTtcbiAgICB9KTtcbiAgfTsiXX0=